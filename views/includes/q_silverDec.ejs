<% const curr = ['','Pzm','Usd','Rur']; %>
<div class="w3-panel"></div>
<div class="w3-row-padding" ng-app="myApp">
  <!-- Left Column -->
  <div class="w3-col s6" ng-controller="MainCtrl">
    <div class="w3-card-4">
      <div class="w3-container w3-teal">
        <h5>Купить</h5>
      </div>
      <form action="/createdeal" method="post" class="w3-container">
        <input type="hidden" name="class" value="1">
        <p>
          <input class="w3-input" type="number" value="0" step="any" name="deal_amount" required ng-model="deal_amount_buy" ng-change="change_buy()">
          <span class="w3-tag w3-green"><%= curr[inc.curr] %></span>
          <input type="hidden" name="deal_currency" value="{{ curr1 }}">
        </p>
        <p>
          <input class="w3-input" type="number" value="0" step="any" name="price_amount" required ng-model="price_amount_buy" ng-change="change_buy()">
          <span class="w3-tag w3-green"><%= curr[inc.curr] %></span>
          <input type="hidden" name="price_currency" value="{{ curr2 }}">
        </p>
        <p>
          <span class="w3-text-yellow">Комиcсия: {{commission_buy | number:4}}</span>
        </p>
        <p>
          <input class="w3-btn w3-teal" type="submit" value="Купить">
        </p>
      </form>
    </div>

  </div>
</div>

<script type="text/javascript">
    //<![CDATA[
    let myApp = angular.module('myApp',[]);
    let nm = {};
    const Curr = ['','Pzm','Usd','Rur'];
    myApp.controller('MainCtrl', function($scope) {
        $scope.curr1 = Curr[<%= inc.curr %>];
        $scope.dt1 = [];
        $scope.commission_buy = 0;
        $scope.change_buy = function () {
            $scope.commission_buy = Number($scope.deal_amount_buy)*Number($scope.price_amount_buy)*0.007;
        };
    });
    //]]>
</script>